/* CSS for YouTube Brainrot Split Screen Extension */

/* Hide default elements when split screen is active */
body.brainrot-split-active {
  overflow: hidden !important;
}

/* YouTube video clone container - left half */
.youtube-clone-container {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 66.6667vw !important;
  height: 100vh !important;
  z-index: 2147483646 !important;
  background: black !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.youtube-clone-container video {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Brainrot container - right half */
.brainrot-container {
  position: fixed !important;
  top: 0 !important;
  right: 0 !important;
  width: 33.3333vw !important;
  height: 100vh !important;
  z-index: 2147483647 !important;
  background: black !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  overflow: hidden !important; /* Hide any overflow from scaled video */
}

/* Brainrot video - now HTML5 video element */
.brainrot-video {
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  background: black !important;
  object-fit: cover !important; /* Fill entire space, may crop to fit aspect ratio */
}

/* Hide YouTube UI elements when in split mode, but show them on hover */
body.brainrot-split-active .ytp-chrome-top,
body.brainrot-split-active .ytp-chrome-bottom,
body.brainrot-split-active .ytp-gradient-top,
body.brainrot-split-active .ytp-gradient-bottom,
body.brainrot-split-active .ytp-chrome-controls,
body.brainrot-split-active .ytp-progress-bar-container,
body.brainrot-split-active .ytp-pause-overlay,
body.brainrot-split-active .ytp-spinner {
  display: none !important;
  opacity: 0 !important;
  pointer-events: none !important;
  visibility: hidden !important;
  transition: opacity 0.2s ease !important;
}

/* Force show controls when they have the visible class */
body.brainrot-split-active .ytp-chrome-controls-visible .ytp-chrome-top,
body.brainrot-split-active .ytp-chrome-controls-visible .ytp-chrome-bottom,
body.brainrot-split-active .ytp-chrome-controls-visible .ytp-gradient-top,
body.brainrot-split-active .ytp-chrome-controls-visible .ytp-gradient-bottom,
body.brainrot-split-active .ytp-chrome-controls-visible .ytp-chrome-controls,
body.brainrot-split-active .ytp-chrome-controls-visible .ytp-progress-bar-container,
body.brainrot-split-active .ytp-user-active .ytp-chrome-top,
body.brainrot-split-active .ytp-user-active .ytp-chrome-bottom,
body.brainrot-split-active .ytp-user-active .ytp-gradient-top,
body.brainrot-split-active .ytp-user-active .ytp-gradient-bottom,
body.brainrot-split-active .ytp-user-active .ytp-chrome-controls,
body.brainrot-split-active .ytp-user-active .ytp-progress-bar-container {
  display: block !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  z-index: 2147483682 !important;
  visibility: visible !important;
}

/* Show controls when hovering over the left video area */
body.brainrot-split-active .youtube-moved-container:hover ~ * .ytp-chrome-top,
body.brainrot-split-active .youtube-moved-container:hover ~ * .ytp-chrome-bottom,
body.brainrot-split-active .youtube-moved-container:hover ~ * .ytp-gradient-top,
body.brainrot-split-active .youtube-moved-container:hover ~ * .ytp-gradient-bottom,
body.brainrot-split-active #movie_player:hover .ytp-chrome-top,
body.brainrot-split-active #movie_player:hover .ytp-chrome-bottom,
body.brainrot-split-active #movie_player:hover .ytp-gradient-top,
body.brainrot-split-active #movie_player:hover .ytp-gradient-bottom,
body.brainrot-split-active #movie_player:hover .ytp-chrome-controls,
body.brainrot-split-active #movie_player:hover .ytp-progress-bar-container {
  display: block !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  z-index: 2147483680 !important;
}

/* Ensure YouTube video fills its container properly */
body.brainrot-split-active .brainrot-youtube-half video {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
}

/* Override any YouTube fullscreen styles that might hide video */
body.brainrot-split-active .ytp-fullscreen .html5-video-container,
body.brainrot-split-active .ytp-fullscreen video,
body.brainrot-split-active .brainrot-youtube-half .html5-video-container,
body.brainrot-split-active .brainrot-youtube-half video {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: auto !important;
  bottom: auto !important;
  transform: none !important;
  position: relative !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 1 !important;
}

/* Force show YouTube player even in fullscreen mode */
body.brainrot-split-active .html5-video-player {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Hide other page elements */
body.brainrot-split-active #masthead,
body.brainrot-split-active #secondary,
body.brainrot-split-active #primary:not(#movie_player),
body.brainrot-split-active ytd-app:not(.brainrot-youtube-half) > *:not(#movie_player):not(.brainrot-container) {
  display: none !important;
}

/* Smooth transitions */
.brainrot-youtube-half,
.brainrot-container {
  transition: all 0.3s ease-in-out !important;
}

/* Additional styles for better video display */
body.brainrot-split-active .brainrot-youtube-half .html5-video-player {
  width: 100% !important;
  height: 100% !important;
  position: relative !important;
}

/* Ensure video element is always visible */
body.brainrot-split-active video {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 1 !important;
}

/* Ensure brainrot video is properly contained */
.brainrot-video {
  pointer-events: auto !important;
  opacity: 1 !important;
}

/* Ensure YouTube player can receive mouse events when needed */
body.brainrot-split-active #movie_player {
  pointer-events: auto !important;
}

/* Make sure video controls are interactive when visible */
body.brainrot-split-active .ytp-chrome-top *,
body.brainrot-split-active .ytp-chrome-bottom * {
  pointer-events: auto !important;
}

/* Ensure progress bar and volume controls work */
body.brainrot-split-active .ytp-progress-bar-container,
body.brainrot-split-active .ytp-volume-slider,
body.brainrot-split-active .ytp-chrome-controls {
  pointer-events: auto !important;
}

/* Make sure the video element itself can receive events when controls are shown */
body.brainrot-split-active video {
  pointer-events: auto !important;
}

/* Ensure all interactive elements in YouTube controls work */
body.brainrot-split-active .ytp-chrome-controls button,
body.brainrot-split-active .ytp-chrome-controls .ytp-play-button,
body.brainrot-split-active .ytp-chrome-controls .ytp-volume-panel,
body.brainrot-split-active .ytp-chrome-controls .ytp-time-display,
body.brainrot-split-active .ytp-chrome-controls .ytp-fullscreen-button,
body.brainrot-split-active .ytp-progress-bar,
body.brainrot-split-active .ytp-progress-bar-container,
body.brainrot-split-active .ytp-volume-slider {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Ensure the progress bar is fully interactive */
body.brainrot-split-active .ytp-progress-bar-container {
  height: auto !important;
  min-height: 12px !important;
}

/* Override any conflicting styles that might hide controls */
body.brainrot-split-active .ytp-autohide .ytp-chrome-bottom,
body.brainrot-split-active .ytp-autohide .ytp-chrome-top {
  opacity: 1 !important;
  display: block !important;
}

/* Force visibility for user-active state */
body.brainrot-split-active .ytp-user-active .ytp-chrome-bottom,
body.brainrot-split-active .ytp-user-active .ytp-chrome-top {
  opacity: 1 !important;
  display: block !important;
  visibility: visible !important;
  transform: none !important;
}
